{% extends "layout.html" %}

{% block title %}Administraci√≥n SMS{% endblock %}

{% block contenido %}
<section class="space-y-7 animate-fade-in-up">

  <!-- üü¢ Encabezado moderno -->
  <header class="space-y-2">
    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-emerald-500/20 to-emerald-600/20 border border-emerald-400/40">
      <i data-lucide="send" class="w-5 h-5 text-emerald-300"></i>
      <span class="text-sm font-semibold text-emerald-200 tracking-wide">Administraci√≥n de SMS</span>
    </div>
  </header>

  <!-- üìÖ Tarjeta de Vencimiento del Paquete -->
  <div class="glass-effect border border-white/20 rounded-2xl p-6 shadow-xl">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-4">
        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center">
          <i data-lucide="calendar-clock" class="w-6 h-6 text-white"></i>
        </div>
        <div>
          <h3 class="text-white font-semibold text-lg">Vencimiento del Paquete</h3>
          <p class="text-gray-400 text-sm">Fecha de expiraci√≥n del plan prepago</p>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <div id="vencimientoInfo" class="text-right">
          <div class="text-2xl font-bold text-purple-300" id="fechaVencimiento">--/--/----</div>
          <div class="text-xs text-gray-400 mt-1" id="diasRestantes">Cargando...</div>
        </div>
        <button onclick="consultarVencimiento()" 
                id="btnConsultarVencimiento"
                class="inline-flex items-center gap-2 px-4 py-2.5 rounded-xl font-semibold
                       bg-purple-600 hover:bg-purple-500 text-white shadow-lg hover:shadow-purple-500/50
                       transition-all duration-200 hover-lift">
          <i data-lucide="refresh-cw" class="w-4 h-4"></i>
          Consultar
        </button>
      </div>
    </div>
  </div>

  <!-- üéõÔ∏è Filtros en tarjeta glassmorphism -->
  <div class="glass-effect border border-white/20 rounded-2xl p-6 space-y-4 shadow-xl">
    {% include "fragmentos/sms_filtros.html" %}

    <!-- üîò Botones mejorados -->
    <div class="flex flex-wrap items-center gap-3 justify-end text-sm pt-2">
      <button onclick="aplicarFiltros()" 
              class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold
                     bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400
                     text-white shadow-lg hover:shadow-emerald-500/50 transition-all duration-200 hover-lift">
        <i data-lucide="filter" class="w-4 h-4"></i>
        Aplicar Filtros
      </button>
      <button onclick="exportarExcel()" 
              class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold
                     bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400
                     text-white shadow-lg hover:shadow-blue-500/50 transition-all duration-200 hover-lift">
        <i data-lucide="download" class="w-4 h-4"></i>
        Exportar Excel
      </button>
      <button onclick="limpiarFiltros()" 
              class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold
                     bg-gray-700 hover:bg-gray-600 text-white border border-gray-600
                     transition-all duration-200 hover-lift">
        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
        Limpiar
      </button>
    </div>
  </div>

  <!-- üìä Tabla + paginaci√≥n -->
  <div class="glass-effect border border-white/20 rounded-2xl shadow-2xl overflow-hidden">
    <div class="p-6 space-y-5">
      {% include "fragmentos/sms_tabla.html" %}

      <div id="rangoRegistros" class="text-center text-gray-300 text-sm italic pt-2 border-t border-white/10">
        Mostrando registros 1‚Äì5
      </div>

      <!-- üîÅ Paginaci√≥n moderna -->
      <div class="flex flex-col sm:flex-row justify-center items-center gap-4 text-white text-sm pt-4">
        <button id="prevPagina" 
                class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold
                       bg-gray-700 hover:bg-gray-600 text-white border border-gray-600
                       disabled:opacity-40 disabled:cursor-not-allowed
                       transition-all duration-200 hover-lift" 
                disabled>
          <i data-lucide="chevron-left" class="w-4 h-4"></i>
          Anterior
        </button>

        <div class="inline-flex items-center gap-2 px-5 py-2 rounded-xl glass-effect border border-emerald-500/40">
          <i data-lucide="file-text" class="w-4 h-4 text-emerald-400"></i>
          <span class="text-gray-300">P√°gina</span>
          <span id="paginaActual" class="font-bold text-emerald-300">1</span>
        </div>

        <button id="nextPagina" 
                class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold
                       bg-gray-700 hover:bg-gray-600 text-white border border-gray-600
                       disabled:opacity-40 disabled:cursor-not-allowed
                       transition-all duration-200 hover-lift">
          Siguiente
          <i data-lucide="chevron-right" class="w-4 h-4"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="animate-fade-in hidden"></div>
</section>
{% endblock %}

{% block scripts %}
  <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
  <script src="/static/js/sms_admin.js?v=4.0"></script>
  <script>lucide.createIcons();</script>
{% endblock %}
